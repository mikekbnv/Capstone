{"ast":null,"code":"import _classCallCheck from\"/Users/mkkbnv/go/src/grpc-react-web/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/mkkbnv/go/src/grpc-react-web/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/mkkbnv/go/src/grpc-react-web/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/mkkbnv/go/src/grpc-react-web/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{Input,Button,Modal}from'antd';import{AccessClient}from'../jsclient/echo_grpc_web_pb';import{ExitRequest}from'../jsclient/echo_pb';import\"../App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ModalFooter=function ModalFooter(_ref){var onClose=_ref.onClose,isAuth=_ref.isAuth;return/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',margin:'0 auto'},children:/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:onClose,danger:!isAuth,children:isAuth?'Authorized':'Not Authorized'})});};var Exit=/*#__PURE__*/function(_Component){_inherits(Exit,_Component);var _super=_createSuper(Exit);function Exit(props){var _this;_classCallCheck(this,Exit);_this=_super.call(this,props);_this.handleTextChange=function(event){_this.setState({Id:event.target.value});};_this.closeModal=function(){_this.setState({isModalOpen:false});};_this.handleSendRequest=function(){var Id=_this.state.Id;var url=window.location.protocol+'//'+window.location.hostname;var client=new AccessClient(\"\".concat(url,\":8080\"),null,null);var request=new ExitRequest();request.setId(Id);client.exitCheck(request,{},function(err,response){if(!err){var responseText=response.getAccess();_this.setState({isModalOpen:true});console.log('Response:',responseText);_this.setState({responseText:responseText.toString(),isModalOpen:true});}else{console.error('Error:',err);}});};_this.state={Id:'',responseText:'',isModalOpen:false};return _this;}_createClass(Exit,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"top-margin\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",block:true,onClick:this.handleSendRequest,children:\"Exit\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Input,{className:\"input-text\",type:\"text\",placeholder:\"Enter ID\",value:this.state.Id,onChange:this.handleTextChange})]}),/*#__PURE__*/_jsx(Modal,{title:\"Exit\",open:this.state.isModalOpen,onCancel:this.closeModal,footer:function footer(){return/*#__PURE__*/_jsx(ModalFooter,{onClose:_this2.closeModal,isAuth:true});},children:/*#__PURE__*/_jsx(\"p\",{children:this.state.responseText?'Bye...':'Not allowed'})})]});}}]);return Exit;}(Component);export default Exit;","map":{"version":3,"names":["React","Component","Input","Button","Modal","AccessClient","ExitRequest","jsx","_jsx","jsxs","_jsxs","ModalFooter","_ref","onClose","isAuth","style","textAlign","margin","children","type","onClick","danger","Exit","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","handleTextChange","event","setState","Id","target","value","closeModal","isModalOpen","handleSendRequest","state","url","window","location","protocol","hostname","client","concat","request","setId","exitCheck","err","response","responseText","getAccess","console","log","toString","error","_createClass","key","render","_this2","className","block","placeholder","onChange","title","open","onCancel","footer"],"sources":["/Users/mkkbnv/go/src/grpc-react-web/frontend/src/pages/exit.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { Input, Button, Modal } from 'antd';\n\nimport { AccessClient } from '../jsclient/echo_grpc_web_pb';\nimport { ExitRequest } from '../jsclient/echo_pb';\nimport \"../App.css\";\n\nconst ModalFooter = ({ onClose, isAuth }) => (\n  <div style={{  textAlign: 'center', margin: '0 auto' }}>\n    <Button type=\"primary\" onClick={onClose} danger={!isAuth}>\n      {isAuth ? 'Authorized' : 'Not Authorized'}\n    </Button>\n  </div>\n);\n\nclass Exit extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      Id: '',\n      responseText: '',\n      isModalOpen: false,\n    };\n  }\n\n  handleTextChange = (event) => {\n    this.setState({ Id: event.target.value });\n  };\n\n  closeModal = () => {\n    this.setState({ isModalOpen: false });\n  }\n\n  handleSendRequest = () => {\n    const { Id } = this.state;\n    const url = window.location.protocol + '//' + window.location.hostname;\n    const client = new AccessClient(`${url}:8080`, null, null);\n    const request = new ExitRequest();\n    request.setId(Id);\n    \n    client.exitCheck(request, {}, (err, response) => {\n      if (!err) {\n        const responseText = response.getAccess();\n        this.setState({ isModalOpen: true});\n        console.log('Response:', responseText);\n        this.setState({ responseText: responseText.toString(), isModalOpen: true });\n      } else {\n        console.error('Error:', err);\n      }\n    });\n  };\n    \n  render() {\n    return (\n      <div className=\"top-margin\">\n        <div>\n          <Button type=\"primary\" block onClick={this.handleSendRequest}>Exit</Button>\n          <br /><br />\n          <Input  className=\"input-text\"\n            type=\"text\"\n            placeholder=\"Enter ID\"\n            value={this.state.Id}\n            onChange={this.handleTextChange}\n          />\n        </div>\n        <Modal \n          title=\"Exit\" \n          open={this.state.isModalOpen} \n          onCancel={this.closeModal}\n          footer={() => <ModalFooter onClose={this.closeModal} isAuth={true} />}\n        >\n          <p>{this.state.responseText ? 'Bye...' : 'Not allowed'}</p>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default Exit;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}