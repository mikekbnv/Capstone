{"ast":null,"code":"import _defineProperty from\"/Users/mkkbnv/go/src/grpc-react-web/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/Users/mkkbnv/go/src/grpc-react-web/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/mkkbnv/go/src/grpc-react-web/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/mkkbnv/go/src/grpc-react-web/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/mkkbnv/go/src/grpc-react-web/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{Input,Button,Modal,Upload,message}from'antd';import{AccessClient}from'../jsclient/echo_grpc_web_pb';import{EmployeeRequest,Employee}from'../jsclient/echo_pb';import\"../App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ModalFooter=function ModalFooter(_ref){var onClose=_ref.onClose,isAuth=_ref.isAuth;return/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',margin:'0 auto'},children:/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:onClose,danger:!isAuth,children:'Okay'})});};var AddEmployee=/*#__PURE__*/function(_Component){_inherits(AddEmployee,_Component);var _super=_createSuper(AddEmployee);function AddEmployee(props){var _this;_classCallCheck(this,AddEmployee);_this=_super.call(this,props);_this.handleTextChange=function(event){_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.handleFileChange=function(file){var reader=new FileReader();reader.onload=function(event){var photoBytes=new Uint8Array(event.target.result);if(!photoBytes||photoBytes.length===0){message.error('Error reading the selected photo.');return;}_this.setState({photoBytes:photoBytes});_this.setState({photoName:file.name});var photoUrl=URL.createObjectURL(file);_this.setState({photoUrl:photoUrl});};reader.readAsArrayBuffer(file);};_this.closeModal=function(){_this.setState({isModalOpen:false});};_this.handleSendRequest=function(){var _this$state=_this.state,fname=_this$state.fname,lname=_this$state.lname,position=_this$state.position,photoBytes=_this$state.photoBytes;var url=window.location.protocol+'//'+window.location.hostname;var client=new AccessClient(\"\".concat(url,\":8080\"),null,null);var request=new EmployeeRequest();var employee=new Employee();employee.setFname(fname);employee.setLname(lname);employee.setPosition(position);employee.setPhoto(photoBytes);request.setEmployee(employee);client.addEmployee(request,{},function(err,response){if(!err){var responseText=response.getId();_this.setState({isModalOpen:true});console.log('Response:',responseText);_this.setState({responseText:responseText.toString()});}else{console.error('Error:',err);}});};_this.state={fname:'',lname:'',position:'',photoBytes:'',photoName:'',photoUrl:null,responseText:'',isModalOpen:false};return _this;}_createClass(AddEmployee,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"top-margin\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",block:true,onClick:this.handleSendRequest,children:\"Add Employee\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Input,{className:\"input-text\",type:\"text\",placeholder:\"First Name\",name:\"fname\",value:this.state.fname,onChange:this.handleTextChange}),/*#__PURE__*/_jsx(Input,{className:\"input-text\",type:\"text\",placeholder:\"Last Name\",name:\"lname\",value:this.state.lname,onChange:this.handleTextChange}),/*#__PURE__*/_jsx(Input,{className:\"input-text\",type:\"text\",placeholder:\"Position\",name:\"position\",value:this.state.position,onChange:this.handleTextChange}),/*#__PURE__*/_jsx(Upload,{accept:\"image/*\",showUploadList:false,beforeUpload:this.handleFileChange,children:/*#__PURE__*/_jsx(Button,{children:\"Select Photo\"})}),this.state.photoName&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Selected Photo: \",this.state.photoName]}),this.state.photoUrl&&/*#__PURE__*/_jsx(\"img\",{src:this.state.photoUrl,alt:\"Preview\"})]}),/*#__PURE__*/_jsx(Modal,{title:\"Add Employee\",visible:this.state.isModalOpen,onCancel:this.closeModal,footer:function footer(){return/*#__PURE__*/_jsx(ModalFooter,{onClose:_this2.closeModal,isAuth:true});},children:/*#__PURE__*/_jsx(\"p\",{children:'Employee added with ID: '+this.state.responseText})})]});}}]);return AddEmployee;}(Component);export default AddEmployee;","map":{"version":3,"names":["React","Component","Input","Button","Modal","Upload","message","AccessClient","EmployeeRequest","Employee","jsx","_jsx","jsxs","_jsxs","ModalFooter","_ref","onClose","isAuth","style","textAlign","margin","children","type","onClick","danger","AddEmployee","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","handleTextChange","event","setState","_defineProperty","target","name","value","handleFileChange","file","reader","FileReader","onload","photoBytes","Uint8Array","result","length","error","photoName","photoUrl","URL","createObjectURL","readAsArrayBuffer","closeModal","isModalOpen","handleSendRequest","_this$state","state","fname","lname","position","url","window","location","protocol","hostname","client","concat","request","employee","setFname","setLname","setPosition","setPhoto","setEmployee","addEmployee","err","response","responseText","getId","console","log","toString","_createClass","key","render","_this2","className","block","placeholder","onChange","accept","showUploadList","beforeUpload","src","alt","title","visible","onCancel","footer"],"sources":["/Users/mkkbnv/go/src/grpc-react-web/frontend/src/pages/addemployee.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { Input, Button, Modal, Upload, message } from 'antd';\n\nimport { AccessClient } from '../jsclient/echo_grpc_web_pb'; \nimport { EmployeeRequest, Employee } from '../jsclient/echo_pb'; \nimport \"../App.css\";\n\nconst ModalFooter = ({ onClose, isAuth }) => (\n  <div style={{ textAlign: 'center', margin: '0 auto' }}>\n    <Button type=\"primary\" onClick={onClose} danger={!isAuth}>\n      { 'Okay'}\n    </Button>\n  </div>\n);\n\nclass AddEmployee extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fname: '',\n      lname: '',\n      position: '',\n      photoBytes: '',\n      photoName: '',\n      photoUrl: null,\n      responseText: '',\n      isModalOpen: false,\n    };\n  }\n\n  handleTextChange = (event) => {\n    this.setState({ [event.target.name]: event.target.value });\n  };\n\n  handleFileChange = (file) => {\n    const reader = new FileReader();\n    reader.onload = (event) => {\n      const photoBytes = new Uint8Array(event.target.result);\n      if (!photoBytes || photoBytes.length === 0) {\n        message.error('Error reading the selected photo.');\n        return;\n      }\n      this.setState({ photoBytes }); \n      this.setState({ photoName: file.name });\n      const photoUrl = URL.createObjectURL(file);\n      this.setState({ photoUrl });\n    };\n    reader.readAsArrayBuffer(file);\n  };\n\n  closeModal = () => {\n    this.setState({ isModalOpen: false });\n  }\n\n  handleSendRequest = () => {\n    const {fname, lname, position, photoBytes } = this.state;\n    const url = window.location.protocol + '//' + window.location.hostname;\n    const client = new AccessClient(`${url}:8080`, null, null); \n    const request = new EmployeeRequest();\n    const employee = new Employee();\n    employee.setFname(fname);\n    employee.setLname(lname);\n    employee.setPosition(position);\n    employee.setPhoto(photoBytes);\n    request.setEmployee(employee);\n\n    client.addEmployee(request, {}, (err, response) => {\n      if (!err) {\n        const responseText = response.getId();\n        this.setState({ isModalOpen: true });\n        console.log('Response:', responseText);\n        this.setState({ responseText: responseText.toString()});\n      } else {\n        console.error('Error:', err);\n      }\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"top-margin\">\n        <div>\n          <Button type=\"primary\" block onClick={this.handleSendRequest}>Add Employee</Button>\n          <br /><br />\n          <Input className=\"input-text\"\n            type=\"text\"\n            placeholder=\"First Name\"\n            name=\"fname\"\n            value={this.state.fname}\n            onChange={this.handleTextChange}\n          />\n          <Input className=\"input-text\"\n            type=\"text\"\n            placeholder=\"Last Name\"\n            name=\"lname\"\n            value={this.state.lname}\n            onChange={this.handleTextChange}\n          />\n          <Input className=\"input-text\"\n            type=\"text\"\n            placeholder=\"Position\"\n            name=\"position\"\n            value={this.state.position}\n            onChange={this.handleTextChange}\n          />\n          <Upload\n            accept=\"image/*\"\n            showUploadList={false}\n            beforeUpload={this.handleFileChange}\n          >\n            <Button>Select Photo</Button>\n          </Upload>\n          {this.state.photoName && (\n            <p>Selected Photo: {this.state.photoName}</p>\n          )}\n          {this.state.photoUrl && (\n            <img src={this.state.photoUrl} alt=\"Preview\" />\n            )}\n        </div>\n        <Modal\n          title=\"Add Employee\"\n          visible={this.state.isModalOpen}\n          onCancel={this.closeModal}\n          footer={() => <ModalFooter onClose={this.closeModal} isAuth={true} />}\n        >\n          <p>{'Employee added with ID: ' + this.state.responseText}</p>\n          \n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default AddEmployee;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}