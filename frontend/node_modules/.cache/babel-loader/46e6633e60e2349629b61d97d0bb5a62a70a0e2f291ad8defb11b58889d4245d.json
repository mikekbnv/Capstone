{"ast":null,"code":"import _classCallCheck from\"/Users/mkkbnv/go/src/grpc-react-web/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/mkkbnv/go/src/grpc-react-web/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/mkkbnv/go/src/grpc-react-web/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/mkkbnv/go/src/grpc-react-web/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{AccessClient}from'../jsclient/echo_grpc_web_pb';import{EmptyRequest,DeleteEmployeeRequest}from'../jsclient/echo_pb';import\"../App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ListEmployees=/*#__PURE__*/function(_Component){_inherits(ListEmployees,_Component);var _super=_createSuper(ListEmployees);function ListEmployees(props){var _this;_classCallCheck(this,ListEmployees);_this=_super.call(this,props);_this.handleDelete=function(id){var url=window.location.protocol+'//'+window.location.hostname;var client=new AccessClient(\"\".concat(url,\":8080\"),null,null);// Replace with your gRPC server URL\nvar request=new DeleteEmployeeRequest();request.setId(id);client.deleteEmployee(request,{},function(err,response){if(!err){_this.setState(function(prevState){return{employees:prevState.employees.filter(function(employee){return employee.getId()!==id;})};});}else{console.error('Error:',err);}});};_this.state={employees:[],currentPage:1,employeesPerPage:50};return _this;}_createClass(ListEmployees,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var url=window.location.protocol+'//'+window.location.hostname;var client=new AccessClient(\"\".concat(url,\":8080\"),null,null);// Replace with your gRPC server URL\nvar request=new EmptyRequest();client.listEmployees(request,{},function(err,response){if(!err){_this2.setState({employees:response.getEmployeesList()});}else{console.error('Error:',err);}});}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,employees=_this$state.employees,currentPage=_this$state.currentPage,employeesPerPage=_this$state.employeesPerPage;var indexOfLastEmployee=currentPage*employeesPerPage;var indexOfFirstEmployee=indexOfLastEmployee-employeesPerPage;var currentEmployees=employees.slice(indexOfFirstEmployee,indexOfLastEmployee);return/*#__PURE__*/_jsxs(\"div\",{className:\"top-margin\",children:[/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Last Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Position\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:currentEmployees.map(function(employee){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:employee.getId()}),/*#__PURE__*/_jsx(\"td\",{children:employee.getFname()}),/*#__PURE__*/_jsx(\"td\",{children:employee.getLname()}),/*#__PURE__*/_jsx(\"td\",{children:employee.getPosition()}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return _this3.handleDelete(employee.getId());},children:\"Delete\"})})]},employee.getId());})})]}),/*#__PURE__*/_jsx(Pagination,{employeesPerPage:employeesPerPage,totalEmployees:employees.length,paginate:function paginate(pageNumber){return _this3.setState({currentPage:pageNumber});}})]});}}]);return ListEmployees;}(Component);var Pagination=function Pagination(_ref){var employeesPerPage=_ref.employeesPerPage,totalEmployees=_ref.totalEmployees,paginate=_ref.paginate;var pageNumbers=[];for(var i=1;i<=Math.ceil(totalEmployees/employeesPerPage);i++){pageNumbers.push(i);}return/*#__PURE__*/_jsx(\"nav\",{children:/*#__PURE__*/_jsx(\"ul\",{className:\"pagination\",children:pageNumbers.map(function(number){return/*#__PURE__*/_jsx(\"li\",{className:\"page-item\",children:/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){return paginate(number);},className:\"page-link\",children:number})},number);})})});};export default ListEmployees;","map":{"version":3,"names":["React","Component","AccessClient","EmptyRequest","DeleteEmployeeRequest","jsx","_jsx","jsxs","_jsxs","ListEmployees","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","handleDelete","id","url","window","location","protocol","hostname","client","concat","request","setId","deleteEmployee","err","response","setState","prevState","employees","filter","employee","getId","console","error","state","currentPage","employeesPerPage","_createClass","key","value","componentDidMount","_this2","listEmployees","getEmployeesList","render","_this3","_this$state","indexOfLastEmployee","indexOfFirstEmployee","currentEmployees","slice","className","children","map","getFname","getLname","getPosition","onClick","Pagination","totalEmployees","length","paginate","pageNumber","_ref","pageNumbers","i","Math","ceil","push","number"],"sources":["/Users/mkkbnv/go/src/grpc-react-web/frontend/src/pages/listemployees.js"],"sourcesContent":["import React, { Component } from 'react';\n\nimport { AccessClient } from '../jsclient/echo_grpc_web_pb'; \nimport { EmptyRequest, DeleteEmployeeRequest } from '../jsclient/echo_pb'; \nimport \"../App.css\";\n\nclass ListEmployees extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      employees: [],\n      currentPage: 1,\n      employeesPerPage: 50\n    };\n  }\n\n  componentDidMount() {\n    const url = window.location.protocol + '//' + window.location.hostname;\n    const client = new AccessClient(`${url}:8080`, null, null);  // Replace with your gRPC server URL\n    const request = new EmptyRequest();\n\n    client.listEmployees(request, {}, (err, response) => {\n      if (!err) {\n        this.setState({ employees: response.getEmployeesList() });\n      } else {\n        console.error('Error:', err);\n      }\n    });\n  }\n\n  handleDelete = (id) => {\n    const url = window.location.protocol + '//' + window.location.hostname;\n    const client = new AccessClient(`${url}:8080`, null, null);  // Replace with your gRPC server URL\n    const request = new DeleteEmployeeRequest();\n    request.setId(id);\n\n    client.deleteEmployee(request, {}, (err, response) => {\n      if (!err) {\n        this.setState((prevState) => ({\n          employees: prevState.employees.filter((employee) => employee.getId() !== id),\n        }));\n      } else {\n        console.error('Error:', err);\n      }\n    });\n  };\n\n  render() {\n    const { employees, currentPage, employeesPerPage } = this.state;\n\n    const indexOfLastEmployee = currentPage * employeesPerPage;\n    const indexOfFirstEmployee = indexOfLastEmployee - employeesPerPage;\n    const currentEmployees = employees.slice(indexOfFirstEmployee, indexOfLastEmployee);\n\n    return (\n      <div className=\"top-margin\">\n        <table>\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>First Name</th>\n              <th>Last Name</th>\n              <th>Position</th>\n              <th>Action</th>\n            </tr>\n          </thead>\n          <tbody>\n            {currentEmployees.map((employee) => (\n              <tr key={employee.getId()}>\n                <td>{employee.getId()}</td>\n                <td>{employee.getFname()}</td>\n                <td>{employee.getLname()}</td>\n                <td>{employee.getPosition()}</td>\n                <td>\n                  <button onClick={() => this.handleDelete(employee.getId())}>Delete</button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n        <Pagination\n          employeesPerPage={employeesPerPage}\n          totalEmployees={employees.length}\n          paginate={(pageNumber) => this.setState({ currentPage: pageNumber })}\n        />\n      </div>\n    );\n  }\n}\n\nconst Pagination = ({ employeesPerPage, totalEmployees, paginate }) => {\n  const pageNumbers = [];\n\n  for (let i = 1; i <= Math.ceil(totalEmployees / employeesPerPage); i++) {\n    pageNumbers.push(i);\n  }\n\n  return (\n    <nav>\n      <ul className='pagination'>\n        {pageNumbers.map(number => (\n          <li key={number} className='page-item'>\n            <a onClick={() => paginate(number)} className='page-link'>\n              {number}\n            </a>\n          </li>\n        ))}\n      </ul>\n    </nav>\n  );\n};\n\nexport default ListEmployees;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}